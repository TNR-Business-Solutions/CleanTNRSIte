<!DOCTYPE html>
<html>
<head>
    <title>Test Browser Form Submission</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 20px; }
        .form-group { margin-bottom: 15px; }
        label { display: block; margin-bottom: 5px; font-weight: bold; }
        input, textarea, select { width: 100%; padding: 8px; border: 1px solid #ddd; border-radius: 4px; }
        button { background: #007bff; color: white; padding: 10px 20px; border: none; border-radius: 4px; cursor: pointer; }
        .results { background: #f8f9fa; padding: 15px; margin: 20px 0; border-radius: 4px; }
        .success { color: #28a745; }
        .error { color: #dc3545; }
    </style>
</head>
<body>
    <h1>Test Browser Form Submission</h1>
    <p>This simulates filling out the actual contact form and submitting it.</p>
    
    <form id="contact-form">
        <div class="form-group">
            <label for="name">Full Name *</label>
            <input type="text" id="name" name="name" required value="Jane Doe">
        </div>
        
        <div class="form-group">
            <label for="email">Email Address *</label>
            <input type="email" id="email" name="email" required value="jane.doe@example.com">
        </div>
        
        <div class="form-group">
            <label for="phone">Phone Number</label>
            <input type="tel" id="phone" name="phone" value="412-555-9876">
        </div>
        
        <div class="form-group">
            <label for="company">Company Name</label>
            <input type="text" id="company" name="company" value="Doe Enterprises">
        </div>
        
        <div class="form-group">
            <label for="website">Website</label>
            <input type="text" id="website" name="website" value="www.doeenterprises.com">
        </div>
        
        <div class="form-group">
            <label for="industry">Industry</label>
            <select id="industry" name="industry">
                <option value="">Select your industry</option>
                <option value="Technology" selected>Technology</option>
                <option value="Construction">Construction</option>
                <option value="Healthcare">Healthcare</option>
            </select>
        </div>
        
        <div class="form-group">
            <label>Services of Interest</label>
            <div>
                <label><input type="checkbox" name="services[]" value="Web Design" checked> Web Design</label><br>
                <label><input type="checkbox" name="services[]" value="SEO Services" checked> SEO Services</label><br>
                <label><input type="checkbox" name="services[]" value="Social Media Management"> Social Media Management</label>
            </div>
        </div>
        
        <div class="form-group">
            <label for="budget">Project Budget</label>
            <select id="budget" name="budget">
                <option value="">Select budget range</option>
                <option value="1000-5000" selected>$1,000 - $5,000</option>
                <option value="5000-10000">$5,000 - $10,000</option>
            </select>
        </div>
        
        <div class="form-group">
            <label for="timeline">Project Timeline</label>
            <select id="timeline" name="timeline">
                <option value="">Select timeline</option>
                <option value="1-month" selected>Within 1 month</option>
                <option value="3-months">Within 3 months</option>
            </select>
        </div>
        
        <div class="form-group">
            <label for="message">Message *</label>
            <textarea id="message" name="message" rows="4" required>We need help with our website and SEO. Our current site is outdated and we're not getting enough leads online.</textarea>
        </div>
        
        <div class="form-group">
            <label for="additionalInfo">Additional Information</label>
            <textarea id="additionalInfo" name="additionalInfo" rows="3">We're a small business with 10 employees looking to grow our online presence.</textarea>
        </div>
        
        <div class="form-group">
            <label>Preferred Contact Method</label>
            <div>
                <label><input type="radio" name="contactMethod" value="phone"> Phone Call</label><br>
                <label><input type="radio" name="contactMethod" value="email" checked> Email</label><br>
                <label><input type="radio" name="contactMethod" value="text"> Text Message</label>
            </div>
        </div>
        
        <button type="submit">Submit Form</button>
    </form>
    
    <div class="results" id="results">
        <h3>Test Results</h3>
        <div id="status">Ready to test...</div>
    </div>

    <!-- Load the actual scripts used by the contact form -->
    <script src="crm-data.js"></script>
    <script src="email-service.js"></script>
    <script src="form-integration.js"></script>
    
    <script>
        // Monitor the form submission and CRM data
        let testCount = 0;
        
        function updateStatus() {
            const statusDiv = document.getElementById('status');
            const submissions = JSON.parse(localStorage.getItem('tnr_form_submissions') || '[]');
            const leads = window.tnrCRM ? window.tnrCRM.leads : [];
            const newLeads = leads.filter(l => l.status === 'New');
            
            statusDiv.innerHTML = `
                <p><strong>Test Count:</strong> ${testCount}</p>
                <p><strong>CRM Available:</strong> <span class="${typeof window.TNRCRMData !== 'undefined' ? 'success' : 'error'}">${typeof window.TNRCRMData !== 'undefined' ? 'Yes' : 'No'}</span></p>
                <p><strong>CRM Instance:</strong> <span class="${window.tnrCRM ? 'success' : 'error'}">${window.tnrCRM ? 'Yes' : 'No'}</span></p>
                <p><strong>Form Submissions:</strong> ${submissions.length}</p>
                <p><strong>Total Leads:</strong> ${leads.length}</p>
                <p><strong>New Leads:</strong> ${newLeads.length}</p>
                <p><strong>Recent Leads:</strong></p>
                <ul>
                    ${leads.slice(-3).map(lead => `<li><strong>${lead.name}</strong> - ${lead.email} - ${lead.source} - ${lead.status}</li>`).join('')}
                </ul>
            `;
        }
        
        // Monitor form submissions
        document.getElementById('contact-form').addEventListener('submit', function(e) {
            testCount++;
            console.log(`ðŸ§ª Form submission #${testCount}`);
            
            // Wait a moment for processing
            setTimeout(() => {
                updateStatus();
            }, 1000);
        });
        
        // Update status every 2 seconds
        setInterval(updateStatus, 2000);
        
        // Initial status update
        setTimeout(updateStatus, 1000);
    </script>
</body>
</html>
