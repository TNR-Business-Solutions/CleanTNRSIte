<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Admin Dashboard - TNR Business Solutions</title>
    <link rel="stylesheet" href="assets/styles.css">
    <style>
        .admin-dashboard {
            min-height: 100vh;
            background: linear-gradient(135deg, var(--tnr-primary), var(--tnr-secondary));
            padding: 2rem 0;
        }
        
        .dashboard-container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 0 1rem;
        }
        
        .dashboard-header {
            text-align: center;
            margin-bottom: 3rem;
            color: white;
        }
        
        .dashboard-header h1 {
            color: var(--tnr-gold);
            margin-bottom: 0.5rem;
            font-size: 2.5rem;
        }
        
        .dashboard-header p {
            color: rgba(255, 255, 255, 0.8);
            font-size: 1.1rem;
        }
        
        .dashboard-tabs {
            display: flex;
            justify-content: center;
            margin-bottom: 2rem;
            flex-wrap: wrap;
            gap: 1rem;
        }
        
        .tab-button {
            background: rgba(255, 255, 255, 0.1);
            border: 2px solid rgba(255, 255, 255, 0.3);
            color: white;
            padding: 12px 24px;
            border-radius: 25px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-weight: 600;
        }
        
        .tab-button.active {
            background: var(--tnr-gold);
            border-color: var(--tnr-gold);
            color: var(--tnr-navy);
        }
        
        .tab-button:hover:not(.active) {
            background: rgba(255, 255, 255, 0.2);
        }
        
        .tab-content {
            display: none;
        }
        
        .tab-content.active {
            display: block;
        }
        
        .dashboard-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 2rem;
            margin-bottom: 2rem;
        }
        
        .dashboard-card {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 20px;
            padding: 2rem;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
            transition: all 0.3s ease;
        }
        
        .dashboard-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 12px 40px rgba(0, 0, 0, 0.4);
        }
        
        .card-header {
            display: flex;
            align-items: center;
            margin-bottom: 1.5rem;
        }
        
        .card-icon {
            font-size: 2rem;
            margin-right: 1rem;
        }
        
        .card-title {
            color: var(--tnr-gold);
            font-size: 1.3rem;
            font-weight: bold;
        }
        
        .card-description {
            color: rgba(255, 255, 255, 0.8);
            margin-bottom: 1.5rem;
            line-height: 1.6;
        }
        
        .card-actions {
            display: flex;
            flex-direction: column;
            gap: 0.8rem;
        }
        
        .card-btn {
            background: var(--tnr-gold);
            color: var(--tnr-navy);
            border: none;
            padding: 12px 20px;
            border-radius: 25px;
            text-decoration: none;
            text-align: center;
            font-weight: 600;
            transition: all 0.3s ease;
            cursor: pointer;
        }
        
        .card-btn:hover {
            background: #ffd700;
            transform: translateY(-2px);
        }
        
        .card-btn.secondary {
            background: transparent;
            color: white;
            border: 2px solid rgba(255, 255, 255, 0.3);
        }
        
        .card-btn.secondary:hover {
            background: rgba(255, 255, 255, 0.1);
        }
        
        .crm-section {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 20px;
            padding: 2rem;
            margin-bottom: 2rem;
        }
        
        .crm-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 2rem;
        }
        
        .crm-title {
            color: var(--tnr-gold);
            font-size: 1.5rem;
            font-weight: bold;
        }
        
        .crm-stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 1rem;
            margin-bottom: 2rem;
        }
        
        .stat-card {
            background: rgba(255, 255, 255, 0.1);
            padding: 1rem;
            border-radius: 10px;
            text-align: center;
        }
        
        .stat-number {
            color: var(--tnr-gold);
            font-size: 2rem;
            font-weight: bold;
        }
        
        .stat-label {
            color: rgba(255, 255, 255, 0.8);
            font-size: 0.9rem;
        }
        
        .crm-tabs {
            display: flex;
            gap: 1rem;
            margin-bottom: 2rem;
            flex-wrap: wrap;
        }
        
        .crm-tab {
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.3);
            color: white;
            padding: 8px 16px;
            border-radius: 20px;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .crm-tab.active {
            background: var(--tnr-gold);
            color: var(--tnr-navy);
        }
        
        .crm-content {
            display: none;
        }
        
        .crm-content.active {
            display: block;
        }
        
        .client-list {
            max-height: 400px;
            overflow-y: auto;
        }
        
        .client-item {
            background: rgba(255, 255, 255, 0.1);
            padding: 1rem;
            margin-bottom: 1rem;
            border-radius: 10px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .client-info h4 {
            color: var(--tnr-gold);
            margin-bottom: 0.5rem;
        }
        
        .client-info p {
            color: rgba(255, 255, 255, 0.8);
            font-size: 0.9rem;
        }
        
        .client-status {
            padding: 4px 12px;
            border-radius: 15px;
            font-size: 0.8rem;
            font-weight: 600;
        }
        
        .status-active {
            background: #28a745;
            color: white;
        }
        
        .status-lead {
            background: #ffc107;
            color: var(--tnr-navy);
        }
        
        .status-prospect {
            background: #17a2b8;
            color: white;
        }
        
        .status-closed {
            background: #6c757d;
            color: white;
        }
        
        .form-group {
            margin-bottom: 1rem;
        }
        
        .form-group label {
            display: block;
            color: var(--tnr-gold);
            margin-bottom: 0.5rem;
            font-weight: 600;
        }
        
        .form-group input,
        .form-group select,
        .form-group textarea {
            width: 100%;
            padding: 10px;
            border: 1px solid rgba(255, 255, 255, 0.3);
            border-radius: 8px;
            background: rgba(255, 255, 255, 0.1);
            color: white;
            font-size: 14px;
        }
        
        .form-group input::placeholder,
        .form-group textarea::placeholder {
            color: rgba(255, 255, 255, 0.6);
        }
        
        .form-group input:focus,
        .form-group select:focus,
        .form-group textarea:focus {
            outline: none;
            border-color: var(--tnr-gold);
        }
        
        .btn-group {
            display: flex;
            gap: 1rem;
            margin-top: 1rem;
        }
        
        .btn {
            background: var(--tnr-gold);
            color: var(--tnr-navy);
            border: none;
            padding: 10px 20px;
            border-radius: 20px;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.3s ease;
            margin: 2px;
        }
        
        .btn:hover {
            background: #ffd700;
            transform: translateY(-2px);
        }
        
        .btn-secondary {
            background: var(--tnr-primary);
            color: white;
        }
        
        .btn-secondary:hover {
            background: var(--tnr-secondary);
        }
        
        .automation-workflow {
            background: rgba(255, 255, 255, 0.1);
            padding: 1.5rem;
            border-radius: 15px;
            margin-bottom: 1rem;
        }
        
        .workflow-step {
            display: flex;
            align-items: center;
            margin-bottom: 1rem;
            padding: 1rem;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 10px;
        }
        
        .step-number {
            background: var(--tnr-gold);
            color: var(--tnr-navy);
            width: 30px;
            height: 30px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            margin-right: 1rem;
        }
        
        .step-content h4 {
            color: var(--tnr-gold);
            margin-bottom: 0.5rem;
        }
        
        .step-content p {
            color: rgba(255, 255, 255, 0.8);
            font-size: 0.9rem;
        }
        
        .live-demo {
            background: linear-gradient(135deg, #28a745, #20c997);
            padding: 2rem;
            border-radius: 20px;
            margin-top: 2rem;
            text-align: center;
        }
        
        .live-demo h3 {
            color: white;
            margin-bottom: 1rem;
        }
        
        .live-demo p {
            color: rgba(255, 255, 255, 0.9);
            margin-bottom: 1.5rem;
        }
        
        .demo-btn {
            background: white;
            color: #28a745;
            border: none;
            padding: 15px 30px;
            border-radius: 25px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
            margin: 0 10px;
        }
        
        .demo-btn:hover {
            background: #f8f9fa;
            transform: translateY(-2px);
        }
        
        @media (max-width: 768px) {
            .dashboard-grid {
                grid-template-columns: 1fr;
            }
            
            .dashboard-tabs {
                flex-direction: column;
                align-items: center;
            }
            
            .crm-stats {
                grid-template-columns: repeat(2, 1fr);
            }
            
            .btn-group {
                flex-direction: column;
            }
        }
        
        /* Modal Styles */
        .modal {
            display: block;
            position: fixed;
            z-index: 1000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0,0,0,0.5);
        }
        
        .modal-content {
            background-color: white;
            margin: 5% auto;
            padding: 0;
            border-radius: 10px;
            width: 90%;
            max-width: 600px;
            max-height: 80vh;
            overflow-y: auto;
        }
        
        .modal-header {
            background: var(--tnr-primary);
            color: white;
            padding: 1rem 1.5rem;
            border-radius: 10px 10px 0 0;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .modal-header h3 {
            margin: 0;
        }
        
        .close {
            color: white;
            font-size: 28px;
            font-weight: bold;
            cursor: pointer;
        }
        
        .close:hover {
            opacity: 0.7;
        }
        
        .modal-body {
            padding: 1.5rem;
        }
        
        .modal-footer {
            padding: 1rem 1.5rem;
            background: #f8f9fa;
            border-radius: 0 0 10px 10px;
            display: flex;
            gap: 1rem;
            justify-content: flex-end;
        }
        
        .form-group {
            margin-bottom: 1rem;
        }
        
        .form-group label {
            display: block;
            margin-bottom: 0.5rem;
            font-weight: bold;
            color: var(--tnr-navy);
        }
        
        .form-group input,
        .form-group select,
        .form-group textarea {
            width: 100%;
            padding: 0.75rem;
            border: 2px solid #ddd;
            border-radius: 6px;
            font-size: 1rem;
        }
        
        .form-group input:focus,
        .form-group select:focus,
        .form-group textarea:focus {
            outline: none;
            border-color: var(--tnr-accent);
        }
        
        .checkbox-group {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 0.5rem;
        }
        
        .checkbox-group label {
            display: flex;
            align-items: center;
            font-weight: normal;
            margin-bottom: 0;
        }
        
        .checkbox-group input[type="checkbox"] {
            width: auto;
            margin-right: 0.5rem;
        }
        
        .btn-small {
            padding: 0.5rem 1rem;
            font-size: 0.9rem;
            margin: 0.25rem;
        }
        
        .btn-danger {
            background: #dc3545;
            color: white;
        }
        
        .btn-danger:hover {
            background: #c82333;
        }
        
        .client-actions {
            display: flex;
            flex-direction: column;
            gap: 0.5rem;
            align-items: flex-end;
        }
        
        .no-data {
            text-align: center;
            padding: 2rem;
            color: #666;
            font-style: italic;
        }
    </style>
</head>
<body>
    <div class="admin-dashboard">
        <div class="dashboard-container">
            <div class="dashboard-header">
                <h1>🎯 TNR Business Solutions Admin Dashboard</h1>
                <p>Complete CRM, Automation & Social Media Management System</p>
            </div>
            
            <div class="dashboard-tabs">
                <button class="tab-button active" onclick="showTab('overview')">📊 Overview</button>
                <button class="tab-button" onclick="showTab('crm')">👥 CRM System</button>
                <button class="tab-button" onclick="showTab('automation')">🤖 Automation</button>
                <button class="tab-button" onclick="showTab('social')">📱 Social Media</button>
                <button class="tab-button" onclick="showTab('analytics')">📈 Analytics</button>
                <button class="tab-button" onclick="showTab('settings')">⚙️ Settings</button>
            </div>
            
            <!-- Overview Tab -->
            <div id="overview" class="tab-content active">
                <div class="dashboard-grid">
                    <div class="dashboard-card">
                        <div class="card-header">
                            <div class="card-icon">👥</div>
                            <div class="card-title">Client Management</div>
                        </div>
                        <div class="card-description">
                            Manage your client relationships, track interactions, and monitor pipeline progress.
                        </div>
                        <div class="card-actions">
                            <a href="#" class="card-btn" onclick="showTab('crm')">Open CRM</a>
                            <a href="#" class="card-btn secondary">Add New Client</a>
                        </div>
                    </div>
                    
                    <div class="dashboard-card">
                        <div class="card-header">
                            <div class="card-icon">📱</div>
                            <div class="card-title">Social Media Automation</div>
                        </div>
                        <div class="card-description">
                            Automate your social media posting, content generation, and engagement across all platforms.
                        </div>
                        <div class="card-actions">
                            <a href="social-media-automation-dashboard.html" class="card-btn">Open Dashboard</a>
                            <a href="tnr-social-media-setup.html" class="card-btn secondary">Connect Platforms</a>
                            <a href="social-media-content-templates.html" class="card-btn secondary">Content Templates</a>
                        </div>
                    </div>
                    
                    <div class="dashboard-card">
                        <div class="card-header">
                            <div class="card-icon">📍</div>
                            <div class="card-title">GMB Automation</div>
                        </div>
                        <div class="card-description">
                            Automate Google My Business posts, reviews, and reporting for better local visibility.
                        </div>
                        <div class="card-actions">
                            <a href="gmb-post-generator.html" class="card-btn">Post Generator</a>
                            <a href="review-request-system.html" class="card-btn secondary">Review System</a>
                        </div>
                    </div>
                    
                    <div class="dashboard-card">
                        <div class="card-header">
                            <div class="card-icon">📧</div>
                            <div class="card-title">Email Marketing</div>
                        </div>
                        <div class="card-description">
                            Create and send automated email campaigns, newsletters, and follow-up sequences.
                        </div>
                        <div class="card-actions">
                            <a href="#" class="card-btn" onclick="createEmailCampaign()">Create Campaign</a>
                            <a href="#" class="card-btn secondary">View Templates</a>
                        </div>
                    </div>
                    
                    <div class="dashboard-card">
                        <div class="card-header">
                            <div class="card-icon">📊</div>
                            <div class="card-title">Analytics & Reports</div>
                        </div>
                        <div class="card-description">
                            Track performance metrics, generate reports, and monitor ROI across all channels.
                        </div>
                        <div class="card-actions">
                            <a href="#" class="card-btn" onclick="showTab('analytics')">View Analytics</a>
                            <a href="#" class="card-btn secondary">Generate Report</a>
                        </div>
                    </div>
                    
                    <div class="dashboard-card">
                        <div class="card-header">
                            <div class="card-icon">🔌</div>
                            <div class="card-title">API Management</div>
                        </div>
                        <div class="card-description">
                            Configure and manage API integrations for seamless automation across platforms.
                        </div>
                        <div class="card-actions">
                            <a href="real-automation-setup.html" class="card-btn">API Setup</a>
                            <a href="#" class="card-btn secondary">System Status</a>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- CRM Tab -->
            <div id="crm" class="tab-content">
                <div class="crm-section">
                    <div class="crm-header">
                        <h2 class="crm-title">👥 Client Relationship Management</h2>
                        <div>
                            <button class="btn" onclick="showAddClientModal()">+ Add New Client</button>
                        </div>
                    </div>
                    
                    <div class="crm-stats">
                        <div class="stat-card">
                            <div class="stat-number" id="totalClients">0</div>
                            <div class="stat-label">Total Clients</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-number" id="activeClients">0</div>
                            <div class="stat-label">Active Clients</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-number" id="newLeads">0</div>
                            <div class="stat-label">New Leads</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-number" id="totalOrders">0</div>
                            <div class="stat-label">Total Orders</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-number" id="totalRevenue">$0</div>
                            <div class="stat-label">Total Revenue</div>
                        </div>
                    </div>
                    
                    <div class="crm-tabs">
                        <button class="crm-tab active" onclick="showCrmTab('clients')">All Clients</button>
                        <button class="crm-tab" onclick="showCrmTab('leads')">Leads</button>
                        <button class="crm-tab" onclick="showCrmTab('orders')">Orders</button>
                    </div>
                    
                    <div id="clients" class="crm-content active">
                        <div class="client-list" id="clientsList">
                            <!-- Clients will be loaded dynamically -->
                        </div>
                    </div>
                    
                    <div id="leads" class="crm-content">
                        <div class="client-list" id="leadsList">
                            <!-- Leads will be loaded dynamically -->
                        </div>
                    </div>
                    
                    <div id="orders" class="crm-content">
                        <div style="margin-bottom: 1.5rem; display: flex; justify-content: space-between; align-items: center;">
                            <h3 style="color: var(--tnr-gold); margin: 0;">Order Management</h3>
                            <button class="btn" onclick="showAddOrderModal()">+ Add New Order</button>
                        </div>
                        <div class="client-list" id="ordersList">
                            <!-- Orders will be loaded dynamically -->
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Automation Tab -->
            <div id="automation" class="tab-content">
                <div class="crm-section">
                    <h2 class="crm-title">🤖 Business Automation Workflows</h2>
                    
                    <div class="automation-workflow">
                        <h3 style="color: var(--tnr-gold); margin-bottom: 1rem;">📧 Email Marketing Automation</h3>
                        <div class="workflow-step">
                            <div class="step-number">1</div>
                            <div class="step-content">
                                <h4>Lead Capture</h4>
                                <p>Automatically capture leads from website forms and social media</p>
                            </div>
                        </div>
                        <div class="workflow-step">
                            <div class="step-number">2</div>
                            <div class="step-content">
                                <h4>Welcome Sequence</h4>
                                <p>Send automated welcome email series to new leads</p>
                            </div>
                        </div>
                        <div class="workflow-step">
                            <div class="step-number">3</div>
                            <div class="step-content">
                                <h4>Nurture Campaign</h4>
                                <p>Follow up with educational content and service information</p>
                            </div>
                        </div>
                        <div class="workflow-step">
                            <div class="step-number">4</div>
                            <div class="step-content">
                                <h4>Conversion</h4>
                                <p>Convert leads to clients with targeted offers and consultations</p>
                            </div>
                        </div>
                    </div>
                    
                    <div class="automation-workflow">
                        <h3 style="color: var(--tnr-gold); margin-bottom: 1rem;">📱 Social Media Automation</h3>
                        <div class="workflow-step">
                            <div class="step-number">1</div>
                            <div class="step-content">
                                <h4>Content Generation</h4>
                                <p>Automatically generate industry-specific content using AI templates</p>
                            </div>
                        </div>
                        <div class="workflow-step">
                            <div class="step-number">2</div>
                            <div class="step-content">
                                <h4>Platform Optimization</h4>
                                <p>Optimize content for each social media platform automatically</p>
                            </div>
                        </div>
                        <div class="workflow-step">
                            <div class="step-number">3</div>
                            <div class="step-content">
                                <h4>Scheduling</h4>
                                <p>Schedule posts at optimal times for maximum engagement</p>
                            </div>
                        </div>
                        <div class="workflow-step">
                            <div class="step-number">4</div>
                            <div class="step-content">
                                <h4>Analytics & Optimization</h4>
                                <p>Track performance and automatically adjust strategy</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Social Media Tab -->
            <div id="social" class="tab-content">
                <div class="dashboard-grid">
                    <div class="dashboard-card">
                        <div class="card-header">
                            <div class="card-icon">📱</div>
                            <div class="card-title">Social Media Dashboard</div>
                        </div>
                        <div class="card-description">
                            Manage all your social media accounts from one central location.
                        </div>
                        <div class="card-actions">
                            <a href="social-media-automation-dashboard.html" class="card-btn">Open Dashboard</a>
                            <a href="#" class="card-btn secondary" onclick="connectSocialAccounts()">Connect Accounts</a>
                        </div>
                    </div>
                    
                    <div class="dashboard-card">
                        <div class="card-header">
                            <div class="card-icon">📝</div>
                            <div class="card-title">Content Templates</div>
                        </div>
                        <div class="card-description">
                            Access 500+ professional templates for every industry and platform.
                        </div>
                        <div class="card-actions">
                            <a href="social-media-content-templates.html" class="card-btn">Browse Templates</a>
                            <a href="#" class="card-btn secondary">Create Custom</a>
                        </div>
                    </div>
                    
                    <div class="dashboard-card">
                        <div class="card-header">
                            <div class="card-icon">📅</div>
                            <div class="card-title">Post Scheduler</div>
                        </div>
                        <div class="card-description">
                            Schedule posts across all platforms with optimal timing.
                        </div>
                        <div class="card-actions">
                            <a href="#" class="card-btn" onclick="openScheduler()">Schedule Posts</a>
                            <a href="#" class="card-btn secondary">View Calendar</a>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Analytics Tab -->
            <div id="analytics" class="tab-content">
                <div class="crm-section">
                    <h2 class="crm-title">📈 Performance Analytics</h2>
                    
                    <div class="crm-stats">
                        <div class="stat-card">
                            <div class="stat-number">2.4K</div>
                            <div class="stat-label">Social Media Followers</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-number">156</div>
                            <div class="stat-label">Posts This Month</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-number">8.2K</div>
                            <div class="stat-label">Total Engagement</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-number">23</div>
                            <div class="stat-label">New Leads</div>
                        </div>
                    </div>
                    
                    <div class="automation-workflow">
                        <h3 style="color: var(--tnr-gold); margin-bottom: 1rem;">📊 Top Performing Content</h3>
                        <div class="workflow-step">
                            <div class="step-number">1</div>
                            <div class="step-content">
                                <h4>Educational Posts</h4>
                                <p>Average engagement: 12.5% | Best performing content type</p>
                            </div>
                        </div>
                        <div class="workflow-step">
                            <div class="step-number">2</div>
                            <div class="step-content">
                                <h4>Behind-the-Scenes</h4>
                                <p>Average engagement: 9.8% | High authenticity factor</p>
                            </div>
                        </div>
                        <div class="workflow-step">
                            <div class="step-number">3</div>
                            <div class="step-content">
                                <h4>Client Testimonials</h4>
                                <p>Average engagement: 8.2% | Strong social proof</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Settings Tab -->
            <div id="settings" class="tab-content">
                <div class="crm-section">
                    <h2 class="crm-title">⚙️ System Settings</h2>
                    
                    <div class="form-group">
                        <label for="businessName">Business Name</label>
                        <input type="text" id="businessName" value="TNR Business Solutions" placeholder="Enter business name">
                    </div>
                    
                    <div class="form-group">
                        <label for="businessEmail">Business Email</label>
                        <input type="email" id="businessEmail" value="roy.turner@tnrbusinesssolutions.com" placeholder="Enter business email">
                    </div>
                    
                    <div class="form-group">
                        <label for="businessPhone">Business Phone</label>
                        <input type="tel" id="businessPhone" value="(412) 499-2987" placeholder="Enter business phone">
                    </div>
                    
                    <div class="form-group">
                        <label for="businessAddress">Business Address</label>
                        <textarea id="businessAddress" placeholder="Enter business address">418 Concord Avenue, Greensburg, PA 15601</textarea>
                    </div>
                    
                    <div class="btn-group">
                        <button class="btn" onclick="saveSettings()">Save Settings</button>
                        <button class="btn btn-secondary" onclick="resetSettings()">Reset</button>
                    </div>
                </div>
            </div>
            
            <!-- Live Demo Section -->
            <div class="live-demo">
                <h3>🚀 Live Demo: TNR Business Solutions Automation</h3>
                <p>See how our automation tools work in real-time with TNR Business Solutions' own social media and marketing</p>
                <button class="demo-btn" onclick="startLiveDemo()">Start Live Demo</button>
                <button class="demo-btn" onclick="showAutomationGuide()">View Guide</button>
            </div>
        </div>
    </div>

    <script src="admin-api-client.js"></script>
    <script src="crm-data.js"></script>
    <script>
        // Tab switching functionality
        function showTab(tabName) {
            // Hide all tabs
            const tabs = document.querySelectorAll('.tab-content');
            tabs.forEach(tab => tab.classList.remove('active'));
            
            // Remove active class from all buttons
            const buttons = document.querySelectorAll('.tab-button');
            buttons.forEach(btn => btn.classList.remove('active'));
            
            // Show selected tab
            document.getElementById(tabName).classList.add('active');
            
            // Add active class to clicked button
            event.target.classList.add('active');
        }
        
        function showCrmTab(tabName) {
            // Hide all CRM tabs
            const tabs = document.querySelectorAll('.crm-content');
            tabs.forEach(tab => tab.classList.remove('active'));
            
            // Remove active class from all CRM buttons
            const buttons = document.querySelectorAll('.crm-tab');
            buttons.forEach(btn => btn.classList.remove('active'));
            
            // Show selected tab
            document.getElementById(tabName).classList.add('active');
            
            // Add active class to clicked button
            event.target.classList.add('active');
        }
        
        // CRM Functions
        function addNewClient() {
            const clientName = prompt('Enter client name:');
            if (clientName) {
                alert(`New client "${clientName}" added successfully!`);
                // In a real application, this would add to the database
                updateClientStats();
            }
        }
        
        function updateClientStats() {
            // Update stats with real CRM data
            const stats = window.tnrCRM.getStats();
            document.getElementById('totalClients').textContent = stats.totalClients;
            document.getElementById('newLeads').textContent = stats.newLeads;
            document.getElementById('activeClients').textContent = stats.activeClients;
            document.getElementById('totalOrders').textContent = stats.totalOrders;
            document.getElementById('totalRevenue').textContent = '$' + stats.totalRevenue.toLocaleString();
        }
        
        // Automation Functions
        function createEmailCampaign() {
            alert('Email campaign creator will open in a new window. This feature integrates with your email marketing platform.');
        }
        
        function connectSocialAccounts() {
            alert('Social account connection wizard will open. Connect your Facebook, Instagram, LinkedIn, and Twitter accounts for seamless automation.');
        }
        
        function openScheduler() {
            alert('Post scheduler will open. Schedule your content across all platforms with optimal timing for maximum engagement.');
        }
        
        // Settings Functions
        function saveSettings() {
            alert('Settings saved successfully! All changes have been applied to your automation workflows.');
        }
        
        function resetSettings() {
            if (confirm('Are you sure you want to reset all settings to default?')) {
                alert('Settings have been reset to default values.');
            }
        }
        
        // Live Demo Functions
        function startLiveDemo() {
            alert('Starting live demo... This will show you how to:\n\n1. Generate content using our templates\n2. Schedule posts across platforms\n3. Track performance and engagement\n4. Automate follow-ups and responses\n\nRedirecting to live demo...');
            window.open('social-media-automation-dashboard.html', '_blank');
        }
        
        function showAutomationGuide() {
            alert('Automation Guide:\n\n1. Set up your social media accounts\n2. Choose your industry templates\n3. Customize content with your business details\n4. Schedule posts for optimal times\n5. Monitor performance and adjust strategy\n\nThis system will help you automate 80% of your social media marketing!');
        }
        
        // Initialize dashboard
        document.addEventListener('DOMContentLoaded', function() {
            // Admin dashboard loaded successfully
            
            // Simulate real-time updates
            // Initialize CRM data and display
            initializeCRM();
        });

        // CRM Functions
        function initializeCRM() {
            // Initializing CRM...
            
            // Ensure CRM is available
            if (!window.tnrCRM) {
                // CRM not available, initializing...
                window.tnrCRM = new TNRCRMData();
            }
            
            // Load data from storage
            window.tnrCRM.loadFromStorage();
            
            // CRM data loaded successfully
            
            // Don't automatically mark leads as viewed - let admin decide
            // window.tnrCRM.markLeadsAsViewed();
            
            // Update statistics
            updateClientStats();
            
            // Load all CRM sections
            loadClients();
            loadLeads();
            loadOrders();
            
            // Set up periodic refresh every 5 seconds to catch new leads
            setInterval(function() {
                updateClientStats();
                loadLeads(); // Refresh leads display
            }, 5000);
        }

        function loadClients() {
            const clientsList = document.getElementById('clientsList');
            const clients = window.tnrCRM.clients;
            
            if (clients.length === 0) {
                clientsList.innerHTML = '<div class="no-data">No clients found. Add your first client to get started!</div>';
                return;
            }
            
            clientsList.innerHTML = clients.map(client => `
                <div class="client-item">
                    <div class="client-info">
                        <h4>${client.name}</h4>
                        <p>${client.industry} | ${client.email} | ${client.phone}</p>
                        <p>Last Contact: ${formatDate(client.lastContact)} | Source: ${client.source}</p>
                        <p>Services: ${client.services.join(', ')}</p>
                    </div>
                    <div class="client-actions">
                        <div class="client-status status-${client.status.toLowerCase()}">${client.status}</div>
                        <button class="btn-small" onclick="editClient('${client.id}')">Edit</button>
                        <button class="btn-small btn-danger" onclick="deleteClient('${client.id}')">Delete</button>
                    </div>
                </div>
            `).join('');
        }

        function loadLeads() {
            const leadsList = document.getElementById('leadsList');
            
            // Ensure CRM is initialized
            if (!window.tnrCRM) {
                // CRM not initialized
                leadsList.innerHTML = '<div class="no-data">CRM not initialized. Please refresh the page.</div>';
                return;
            }
            
            // Load fresh data from storage
            window.tnrCRM.loadFromStorage();
            const leads = window.tnrCRM.leads;
            
            // Loading leads from CRM
            
            if (leads.length === 0) {
                leadsList.innerHTML = '<div class="no-data">No leads found. Form submissions will appear here.</div>';
                return;
            }
            
            leadsList.innerHTML = leads.map(lead => {
                // Create comprehensive detailed information display (same as email template)
                const details = [];
                
                // Basic info
                if (lead.company) details.push(`<strong>Company:</strong> ${lead.company}`);
                if (lead.industry) details.push(`<strong>Industry:</strong> ${lead.industry}`);
                if (lead.website) details.push(`<strong>Website:</strong> ${lead.website}`);
                if (lead.budget) details.push(`<strong>Budget:</strong> ${lead.budget}`);
                if (lead.timeline) details.push(`<strong>Timeline:</strong> ${lead.timeline}`);
                if (lead.contactMethod) details.push(`<strong>Contact Method:</strong> ${lead.contactMethod}`);
                
                // Personal details
                if (lead.dateOfBirth) details.push(`<strong>Date of Birth:</strong> ${lead.dateOfBirth}`);
                if (lead.maritalStatus) details.push(`<strong>Marital Status:</strong> ${lead.maritalStatus}`);
                if (lead.gender) details.push(`<strong>Gender:</strong> ${lead.gender}`);
                if (lead.address) details.push(`<strong>Address:</strong> ${lead.address}`);
                if (lead.apartment) details.push(`<strong>Apartment/Unit:</strong> ${lead.apartment}`);
                if (lead.city) details.push(`<strong>City:</strong> ${lead.city}`);
                if (lead.state) details.push(`<strong>State:</strong> ${lead.state}`);
                if (lead.zipCode) details.push(`<strong>Zip Code:</strong> ${lead.zipCode}`);
                
                // License details
                if (lead.licenseNumber) details.push(`<strong>License Number:</strong> ${lead.licenseNumber}`);
                if (lead.licenseState) details.push(`<strong>License State:</strong> ${lead.licenseState}`);
                
                // Vehicle details
                if (lead.vehicleYear) details.push(`<strong>Vehicle Year:</strong> ${lead.vehicleYear}`);
                if (lead.vehicleMake) details.push(`<strong>Vehicle Make:</strong> ${lead.vehicleMake}`);
                if (lead.vehicleModel) details.push(`<strong>Vehicle Model:</strong> ${lead.vehicleModel}`);
                if (lead.vin) details.push(`<strong>VIN:</strong> ${lead.vin}`);
                if (lead.licensePlate) details.push(`<strong>License Plate:</strong> ${lead.licensePlate}`);
                if (lead.vehicleUse) details.push(`<strong>Vehicle Use:</strong> ${lead.vehicleUse}`);
                if (lead.annualMileage) details.push(`<strong>Annual Mileage:</strong> ${lead.annualMileage}`);
                if (lead.vehicleOwnership) details.push(`<strong>Vehicle Ownership:</strong> ${lead.vehicleOwnership}`);
                if (lead.garagingAddress) details.push(`<strong>Garaging Address:</strong> ${lead.garagingAddress}`);
                
                // Driving history
                if (lead.yearsLicensed) details.push(`<strong>Years Licensed:</strong> ${lead.yearsLicensed}`);
                if (lead.accidents) details.push(`<strong>Accidents:</strong> ${lead.accidents}`);
                if (lead.trafficViolations) details.push(`<strong>Traffic Violations:</strong> ${lead.trafficViolations}`);
                if (lead.duiDwi) details.push(`<strong>DUI/DWI:</strong> ${lead.duiDwi}`);
                if (lead.licenseSuspended) details.push(`<strong>License Suspended:</strong> ${lead.licenseSuspended}`);
                if (lead.currentInsurance) details.push(`<strong>Current Insurance:</strong> ${lead.currentInsurance}`);
                
                // Property details (Home Insurance)
                if (lead.yearBuilt) details.push(`<strong>Year Built:</strong> ${lead.yearBuilt}`);
                if (lead.propertyType) details.push(`<strong>Property Type:</strong> ${lead.propertyType}`);
                if (lead.squareFootage) details.push(`<strong>Square Footage:</strong> ${lead.squareFootage}`);
                if (lead.bedrooms) details.push(`<strong>Bedrooms:</strong> ${lead.bedrooms}`);
                if (lead.bathrooms) details.push(`<strong>Bathrooms:</strong> ${lead.bathrooms}`);
                if (lead.constructionType) details.push(`<strong>Construction Type:</strong> ${lead.constructionType}`);
                if (lead.roofType) details.push(`<strong>Roof Type:</strong> ${lead.roofType}`);
                if (lead.homeValue) details.push(`<strong>Home Value:</strong> $${lead.homeValue}`);
                
                // Life Insurance details
                if (lead.coverageType) details.push(`<strong>Coverage Type:</strong> ${lead.coverageType}`);
                if (lead.coverageAmount) details.push(`<strong>Coverage Amount:</strong> $${lead.coverageAmount}`);
                if (lead.termLength) details.push(`<strong>Term Length:</strong> ${lead.termLength} years`);
                if (lead.smokingStatus) details.push(`<strong>Smoking Status:</strong> ${lead.smokingStatus}`);
                if (lead.height) details.push(`<strong>Height:</strong> ${lead.height}`);
                if (lead.weight) details.push(`<strong>Weight:</strong> ${lead.weight}`);
                
                // Health conditions
                const healthConditions = [];
                if (lead.heartDisease) healthConditions.push('Heart Disease');
                if (lead.diabetes) healthConditions.push('Diabetes');
                if (lead.cancer) healthConditions.push('Cancer');
                if (lead.highBloodPressure) healthConditions.push('High Blood Pressure');
                if (lead.depressionAnxiety) healthConditions.push('Depression/Anxiety');
                if (lead.noneOfAbove) healthConditions.push('None of the above');
                if (healthConditions.length > 0) details.push(`<strong>Health Conditions:</strong> ${healthConditions.join(', ')}`);
                
                // Business Insurance details
                if (lead.businessAddress) details.push(`<strong>Business Address:</strong> ${lead.businessAddress}`);
                if (lead.firstName) details.push(`<strong>First Name:</strong> ${lead.firstName}`);
                if (lead.lastName) details.push(`<strong>Last Name:</strong> ${lead.lastName}`);
                if (lead.contactEmail) details.push(`<strong>Contact Email:</strong> ${lead.contactEmail}`);
                if (lead.contactPhone) details.push(`<strong>Contact Phone:</strong> ${lead.contactPhone}`);
                if (lead.jobTitle) details.push(`<strong>Job Title:</strong> ${lead.jobTitle}`);
                
                // Business coverage options
                const businessCoverage = [];
                if (lead.generalLiability) businessCoverage.push('General Liability');
                if (lead.commercialProperty) businessCoverage.push('Commercial Property');
                if (lead.workersCompensation) businessCoverage.push('Workers Compensation');
                if (lead.professionalLiability) businessCoverage.push('Professional Liability');
                if (lead.cyberLiability) businessCoverage.push('Cyber Liability');
                if (lead.commercialAuto) businessCoverage.push('Commercial Auto');
                if (lead.directorsOfficers) businessCoverage.push('Directors & Officers');
                if (lead.otherCoverage) businessCoverage.push('Other');
                if (businessCoverage.length > 0) details.push(`<strong>Business Coverage Needed:</strong> ${businessCoverage.join(', ')}`);
                
                // Umbrella Insurance details
                if (lead.coverageAmount) details.push(`<strong>Desired Coverage Amount:</strong> ${lead.coverageAmount}`);
                if (lead.currentPolicies) details.push(`<strong>Current Policies:</strong> ${lead.currentPolicies}`);
                if (lead.insuranceType) details.push(`<strong>Insurance Type:</strong> ${lead.insuranceType}`);
                
                // Coverage details
                if (lead.coverageLevel) details.push(`<strong>Coverage Level:</strong> ${lead.coverageLevel}`);
                if (lead.deductible) details.push(`<strong>Deductible:</strong> $${lead.deductible}`);
                
                // Additional coverage options
                const additionalCoverage = [];
                if (lead.roadsideAssistance) additionalCoverage.push('Roadside Assistance');
                if (lead.rentalCarCoverage) additionalCoverage.push('Rental Car Coverage');
                if (lead.gapInsurance) additionalCoverage.push('Gap Insurance');
                if (lead.personalInjuryProtection) additionalCoverage.push('Personal Injury Protection');
                if (lead.uninsuredMotorist) additionalCoverage.push('Uninsured Motorist');
                if (lead.underinsuredMotorist) additionalCoverage.push('Underinsured Motorist');
                if (lead.floodInsurance) additionalCoverage.push('Flood Insurance');
                if (lead.earthquakeCoverage) additionalCoverage.push('Earthquake Coverage');
                if (lead.sewerBackupCoverage) additionalCoverage.push('Sewer Backup Coverage');
                if (lead.identityTheftProtection) additionalCoverage.push('Identity Theft Protection');
                if (additionalCoverage.length > 0) details.push(`<strong>Additional Coverage:</strong> ${additionalCoverage.join(', ')}`);
                
                // Services
                const servicesText = Array.isArray(lead.services) ? lead.services.join(', ') : lead.services || 'Not specified';
                
                return `
                <div class="client-item" style="color: black;">
                    <div class="client-info" style="color: black;">
                        <h4 style="color: black;">${lead.name}</h4>
                        <p style="color: black;"><strong>Email:</strong> ${lead.email} | <strong>Phone:</strong> ${lead.phone}</p>
                        <p style="color: black;"><strong>Services:</strong> ${servicesText}</p>
                        <p style="color: black;"><strong>Date:</strong> ${lead.submissionDate || formatDate(lead.submissionDateTime || lead.date)} | <strong>Source:</strong> ${lead.source}</p>
                        <p style="color: black;"><strong>Message:</strong> ${lead.message || 'No message'}</p>
                        ${details.length > 0 ? `<div style="margin-top: 10px; padding: 10px; background: #f5f5f5; border-radius: 4px; font-size: 0.9em; color: black;">
                            <strong style="color: black;">Complete Form Details:</strong><br>
                            <div style="color: black;">${details.join('<br>')}</div>
                        </div>` : ''}
                    </div>
                    <div class="client-actions">
                        <div class="client-status status-lead">${lead.status}</div>
                        <button class="btn-small" onclick="convertLeadToClient('${lead.id}')">Convert to Client</button>
                        <button class="btn-small btn-danger" onclick="deleteLead('${lead.id}')">Delete</button>
                    </div>
                </div>
            `;
            }).join('');
        }

        function loadOrders() {
            const ordersList = document.getElementById('ordersList');
            const orders = window.tnrCRM.orders || [];
            
            if (orders.length === 0) {
                ordersList.innerHTML = '<div class="no-data">No orders found. Click "+ Add New Order" to create your first order.</div>';
                return;
            }
            
            // Sort orders by date (newest first)
            const sortedOrders = [...orders].sort((a, b) => {
                const dateA = new Date(a.orderDate || a.date || 0);
                const dateB = new Date(b.orderDate || b.date || 0);
                return dateB - dateA;
            });
            
            ordersList.innerHTML = sortedOrders.map(order => {
                const orderDate = order.orderDate || order.date || 'Not specified';
                const description = order.description || order.specialRequests || 'No description';
                const timeline = order.projectTimeline ? `Timeline: ${order.projectTimeline}` : '';
                const paymentMethod = order.paymentMethod ? `Payment: ${order.paymentMethod}` : '';
                
                return `
                <div class="client-item">
                    <div class="client-info">
                        <h4>${order.clientName || 'Unknown Client'}</h4>
                        <p><strong>Service:</strong> ${order.service || 'Not specified'} ${order.industry ? `| Industry: ${order.industry}` : ''}</p>
                        <p><strong>Amount:</strong> $${(order.amount || 0).toLocaleString('en-US', {minimumFractionDigits: 2, maximumFractionDigits: 2})} | <strong>Status:</strong> ${order.status || 'Pending'}</p>
                        <p><strong>Order Date:</strong> ${formatDate(orderDate)}</p>
                        ${timeline ? `<p>${timeline}</p>` : ''}
                        ${paymentMethod ? `<p>${paymentMethod}</p>` : ''}
                        <p><strong>Description:</strong> ${description}</p>
                    </div>
                    <div class="client-actions">
                        <div class="client-status status-${(order.status || 'pending').toLowerCase().replace(' ', '-')}">${order.status || 'Pending'}</div>
                        <button class="btn-small" onclick="editOrder('${order.id}')">Edit</button>
                        <button class="btn-small btn-danger" onclick="deleteOrder('${order.id}')">Delete</button>
                    </div>
                </div>
            `;
            }).join('');
        }

        function loadFormSubmissions() {
            const formSubmissionsList = document.getElementById('formSubmissionsList');
            const submissions = window.tnrCRM.formSubmissions;
            
            if (submissions.length === 0) {
                formSubmissionsList.innerHTML = '<div class="no-data">No form submissions found. Website form submissions will appear here.</div>';
                return;
            }
            
            formSubmissionsList.innerHTML = submissions.map(submission => {
                // Create comprehensive detailed information display (same as email template)
                const details = [];
                
                // Basic info
                if (submission.company) details.push(`<strong>Company:</strong> ${submission.company}`);
                if (submission.industry) details.push(`<strong>Industry:</strong> ${submission.industry}`);
                if (submission.website) details.push(`<strong>Website:</strong> ${submission.website}`);
                if (submission.budget) details.push(`<strong>Budget:</strong> ${submission.budget}`);
                if (submission.timeline) details.push(`<strong>Timeline:</strong> ${submission.timeline}`);
                if (submission.contactMethod) details.push(`<strong>Contact Method:</strong> ${submission.contactMethod}`);
                
                // Personal details
                if (submission.dateOfBirth) details.push(`<strong>Date of Birth:</strong> ${submission.dateOfBirth}`);
                if (submission.maritalStatus) details.push(`<strong>Marital Status:</strong> ${submission.maritalStatus}`);
                if (submission.gender) details.push(`<strong>Gender:</strong> ${submission.gender}`);
                if (submission.address) details.push(`<strong>Address:</strong> ${submission.address}`);
                if (submission.apartment) details.push(`<strong>Apartment/Unit:</strong> ${submission.apartment}`);
                if (submission.city) details.push(`<strong>City:</strong> ${submission.city}`);
                if (submission.state) details.push(`<strong>State:</strong> ${submission.state}`);
                if (submission.zipCode) details.push(`<strong>Zip Code:</strong> ${submission.zipCode}`);
                
                // License details
                if (submission.licenseNumber) details.push(`<strong>License Number:</strong> ${submission.licenseNumber}`);
                if (submission.licenseState) details.push(`<strong>License State:</strong> ${submission.licenseState}`);
                
                // Vehicle details
                if (submission.vehicleYear) details.push(`<strong>Vehicle Year:</strong> ${submission.vehicleYear}`);
                if (submission.vehicleMake) details.push(`<strong>Vehicle Make:</strong> ${submission.vehicleMake}`);
                if (submission.vehicleModel) details.push(`<strong>Vehicle Model:</strong> ${submission.vehicleModel}`);
                if (submission.vin) details.push(`<strong>VIN:</strong> ${submission.vin}`);
                if (submission.licensePlate) details.push(`<strong>License Plate:</strong> ${submission.licensePlate}`);
                if (submission.vehicleUse) details.push(`<strong>Vehicle Use:</strong> ${submission.vehicleUse}`);
                if (submission.annualMileage) details.push(`<strong>Annual Mileage:</strong> ${submission.annualMileage}`);
                if (submission.vehicleOwnership) details.push(`<strong>Vehicle Ownership:</strong> ${submission.vehicleOwnership}`);
                if (submission.garagingAddress) details.push(`<strong>Garaging Address:</strong> ${submission.garagingAddress}`);
                
                // Driving history
                if (submission.yearsLicensed) details.push(`<strong>Years Licensed:</strong> ${submission.yearsLicensed}`);
                if (submission.accidents) details.push(`<strong>Accidents:</strong> ${submission.accidents}`);
                if (submission.trafficViolations) details.push(`<strong>Traffic Violations:</strong> ${submission.trafficViolations}`);
                if (submission.duiDwi) details.push(`<strong>DUI/DWI:</strong> ${submission.duiDwi}`);
                if (submission.licenseSuspended) details.push(`<strong>License Suspended:</strong> ${submission.licenseSuspended}`);
                if (submission.currentInsurance) details.push(`<strong>Current Insurance:</strong> ${submission.currentInsurance}`);
                
                // Property details (Home Insurance)
                if (submission.yearBuilt) details.push(`<strong>Year Built:</strong> ${submission.yearBuilt}`);
                if (submission.propertyType) details.push(`<strong>Property Type:</strong> ${submission.propertyType}`);
                if (submission.squareFootage) details.push(`<strong>Square Footage:</strong> ${submission.squareFootage}`);
                if (submission.bedrooms) details.push(`<strong>Bedrooms:</strong> ${submission.bedrooms}`);
                if (submission.bathrooms) details.push(`<strong>Bathrooms:</strong> ${submission.bathrooms}`);
                if (submission.constructionType) details.push(`<strong>Construction Type:</strong> ${submission.constructionType}`);
                if (submission.roofType) details.push(`<strong>Roof Type:</strong> ${submission.roofType}`);
                if (submission.homeValue) details.push(`<strong>Home Value:</strong> $${submission.homeValue}`);
                
                // Life Insurance details
                if (submission.coverageType) details.push(`<strong>Coverage Type:</strong> ${submission.coverageType}`);
                if (submission.coverageAmount) details.push(`<strong>Coverage Amount:</strong> $${submission.coverageAmount}`);
                if (submission.termLength) details.push(`<strong>Term Length:</strong> ${submission.termLength} years`);
                if (submission.smokingStatus) details.push(`<strong>Smoking Status:</strong> ${submission.smokingStatus}`);
                if (submission.height) details.push(`<strong>Height:</strong> ${submission.height}`);
                if (submission.weight) details.push(`<strong>Weight:</strong> ${submission.weight}`);
                
                // Health conditions
                const healthConditions = [];
                if (submission.heartDisease) healthConditions.push('Heart Disease');
                if (submission.diabetes) healthConditions.push('Diabetes');
                if (submission.cancer) healthConditions.push('Cancer');
                if (submission.highBloodPressure) healthConditions.push('High Blood Pressure');
                if (submission.depressionAnxiety) healthConditions.push('Depression/Anxiety');
                if (submission.noneOfAbove) healthConditions.push('None of the above');
                if (healthConditions.length > 0) details.push(`<strong>Health Conditions:</strong> ${healthConditions.join(', ')}`);
                
                // Business Insurance details
                if (submission.businessAddress) details.push(`<strong>Business Address:</strong> ${submission.businessAddress}`);
                if (submission.firstName) details.push(`<strong>First Name:</strong> ${submission.firstName}`);
                if (submission.lastName) details.push(`<strong>Last Name:</strong> ${submission.lastName}`);
                if (submission.contactEmail) details.push(`<strong>Contact Email:</strong> ${submission.contactEmail}`);
                if (submission.contactPhone) details.push(`<strong>Contact Phone:</strong> ${submission.contactPhone}`);
                if (submission.jobTitle) details.push(`<strong>Job Title:</strong> ${submission.jobTitle}`);
                
                // Business coverage options
                const businessCoverage = [];
                if (submission.generalLiability) businessCoverage.push('General Liability');
                if (submission.commercialProperty) businessCoverage.push('Commercial Property');
                if (submission.workersCompensation) businessCoverage.push('Workers Compensation');
                if (submission.professionalLiability) businessCoverage.push('Professional Liability');
                if (submission.cyberLiability) businessCoverage.push('Cyber Liability');
                if (submission.commercialAuto) businessCoverage.push('Commercial Auto');
                if (submission.directorsOfficers) businessCoverage.push('Directors & Officers');
                if (submission.otherCoverage) businessCoverage.push('Other');
                if (businessCoverage.length > 0) details.push(`<strong>Business Coverage Needed:</strong> ${businessCoverage.join(', ')}`);
                
                // Umbrella Insurance details
                if (submission.coverageAmount) details.push(`<strong>Desired Coverage Amount:</strong> ${submission.coverageAmount}`);
                if (submission.currentPolicies) details.push(`<strong>Current Policies:</strong> ${submission.currentPolicies}`);
                if (submission.insuranceType) details.push(`<strong>Insurance Type:</strong> ${submission.insuranceType}`);
                
                // Coverage details
                if (submission.coverageLevel) details.push(`<strong>Coverage Level:</strong> ${submission.coverageLevel}`);
                if (submission.deductible) details.push(`<strong>Deductible:</strong> $${submission.deductible}`);
                
                // Additional coverage options
                const additionalCoverage = [];
                if (submission.roadsideAssistance) additionalCoverage.push('Roadside Assistance');
                if (submission.rentalCarCoverage) additionalCoverage.push('Rental Car Coverage');
                if (submission.gapInsurance) additionalCoverage.push('Gap Insurance');
                if (submission.personalInjuryProtection) additionalCoverage.push('Personal Injury Protection');
                if (submission.uninsuredMotorist) additionalCoverage.push('Uninsured Motorist');
                if (submission.underinsuredMotorist) additionalCoverage.push('Underinsured Motorist');
                if (submission.floodInsurance) additionalCoverage.push('Flood Insurance');
                if (submission.earthquakeCoverage) additionalCoverage.push('Earthquake Coverage');
                if (submission.sewerBackupCoverage) additionalCoverage.push('Sewer Backup Coverage');
                if (submission.identityTheftProtection) additionalCoverage.push('Identity Theft Protection');
                if (additionalCoverage.length > 0) details.push(`<strong>Additional Coverage:</strong> ${additionalCoverage.join(', ')}`);
                
                // Services
                const servicesText = Array.isArray(submission.services) ? submission.services.join(', ') : submission.services || 'Not specified';
                
                return `
                <div class="client-item" style="color: black;">
                    <div class="client-info" style="color: black;">
                        <h4 style="color: black;">${submission.name}</h4>
                        <p style="color: black;">${submission.email} | ${submission.phone}</p>
                        <p style="color: black;">Date: ${formatDate(submission.date)} | Source: ${submission.source}</p>
                        <p style="color: black;">Message: ${submission.message}</p>
                        ${details.length > 0 ? `<div style="margin-top: 10px; padding: 10px; background: #f5f5f5; border-radius: 4px; font-size: 0.9em; color: black;">
                            <strong style="color: black;">Complete Form Details:</strong><br>
                            <div style="color: black;">${details.join('<br>')}</div>
                        </div>` : ''}
                    </div>
                    <div class="client-actions">
                        <button class="btn-small" onclick="convertSubmissionToLead('${submission.id}')">Convert to Lead</button>
                        <button class="btn-small btn-danger" onclick="deleteSubmission('${submission.id}')">Delete</button>
                    </div>
                </div>
            `;
            }).join('');
        }

        function showAddClientModal() {
            const modal = document.createElement('div');
            modal.className = 'modal';
            modal.innerHTML = `
                <div class="modal-content">
                    <div class="modal-header">
                        <h3 style="color: black;">Add New Client</h3>
                        <span class="close" onclick="closeModal()">&times;</span>
                    </div>
                    <div class="modal-body" style="color: black;">
                        <form id="addClientForm">
                            <div class="form-group">
                                <label style="color: black;">Client Name *</label>
                                <input type="text" id="clientName" required style="color: black;">
                            </div>
                            <div class="form-group">
                                <label style="color: black;">Industry *</label>
                                <select id="clientIndustry" required style="color: black;">
                                    <option value="">Select Industry</option>
                                    <option value="Construction">Construction</option>
                                    <option value="Legal Services">Legal Services</option>
                                    <option value="E-commerce">E-commerce</option>
                                    <option value="Food Service">Food Service</option>
                                    <option value="Healthcare">Healthcare</option>
                                    <option value="Real Estate">Real Estate</option>
                                    <option value="Retail">Retail</option>
                                    <option value="Technology">Technology</option>
                                    <option value="Other">Other</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label style="color: black;">Email *</label>
                                <input type="email" id="clientEmail" required style="color: black;">
                            </div>
                            <div class="form-group">
                                <label style="color: black;">Phone</label>
                                <input type="tel" id="clientPhone" style="color: black;">
                            </div>
                            <div class="form-group">
                                <label style="color: black;">Address</label>
                                <textarea id="clientAddress" rows="3" style="color: black;"></textarea>
                            </div>
                            <div class="form-group">
                                <label style="color: black;">Services</label>
                                <div class="checkbox-group">
                                    <label style="color: black;"><input type="checkbox" value="Web Design"> Web Design</label>
                                    <label style="color: black;"><input type="checkbox" value="SEO Services"> SEO Services</label>
                                    <label style="color: black;"><input type="checkbox" value="Social Media Management"> Social Media Management</label>
                                    <label style="color: black;"><input type="checkbox" value="Content Creation"> Content Creation</label>
                                    <label style="color: black;"><input type="checkbox" value="Paid Advertising"> Paid Advertising</label>
                                    <label style="color: black;"><input type="checkbox" value="Email Marketing"> Email Marketing</label>
                                </div>
                            </div>
                            <div class="form-group">
                                <label style="color: black;">Notes</label>
                                <textarea id="clientNotes" rows="3" style="color: black;"></textarea>
                            </div>
                            <div class="form-group">
                                <label style="color: black;">Source</label>
                                <select id="clientSource" style="color: black;">
                                    <option value="Website Form">Website Form</option>
                                    <option value="Referral">Referral</option>
                                    <option value="Google Ads">Google Ads</option>
                                    <option value="Facebook">Facebook</option>
                                    <option value="LinkedIn">LinkedIn</option>
                                    <option value="Cold Call">Cold Call</option>
                                    <option value="Other">Other</option>
                                </select>
                            </div>
                        </form>
                    </div>
                    <div class="modal-footer">
                        <button class="btn" onclick="saveNewClient()">Save Client</button>
                        <button class="btn btn-secondary" onclick="closeModal()">Cancel</button>
                    </div>
                </div>
            `;
            document.body.appendChild(modal);
        }

        function saveNewClient() {
            const form = document.getElementById('addClientForm');
            const formData = new FormData(form);
            
            const clientData = {
                name: document.getElementById('clientName').value,
                industry: document.getElementById('clientIndustry').value,
                email: document.getElementById('clientEmail').value,
                phone: document.getElementById('clientPhone').value,
                address: document.getElementById('clientAddress').value,
                services: Array.from(document.querySelectorAll('input[type="checkbox"]:checked')).map(cb => cb.value),
                notes: document.getElementById('clientNotes').value,
                source: document.getElementById('clientSource').value
            };
            
            if (!clientData.name || !clientData.industry || !clientData.email) {
                alert('Please fill in all required fields.');
                return;
            }
            
            window.tnrCRM.addClient(clientData);
            closeModal();
            loadClients();
            updateClientStats();
            alert('Client added successfully!');
        }

        function editClient(clientId) {
            const client = window.tnrCRM.getClient(clientId);
            if (!client) return;
            
            const modal = document.createElement('div');
            modal.className = 'modal';
            modal.innerHTML = `
                <div class="modal-content">
                    <div class="modal-header">
                        <h3 style="color: black;">Edit Client</h3>
                        <span class="close" onclick="closeModal()">&times;</span>
                    </div>
                    <div class="modal-body" style="color: black;">
                        <form id="editClientForm">
                            <div class="form-group">
                                <label style="color: black;">Client Name *</label>
                                <input type="text" id="editClientName" value="${client.name}" required style="color: black;">
                            </div>
                            <div class="form-group">
                                <label style="color: black;">Industry *</label>
                                <select id="editClientIndustry" required style="color: black;">
                                    <option value="Construction" ${client.industry === 'Construction' ? 'selected' : ''}>Construction</option>
                                    <option value="Legal Services" ${client.industry === 'Legal Services' ? 'selected' : ''}>Legal Services</option>
                                    <option value="E-commerce" ${client.industry === 'E-commerce' ? 'selected' : ''}>E-commerce</option>
                                    <option value="Food Service" ${client.industry === 'Food Service' ? 'selected' : ''}>Food Service</option>
                                    <option value="Healthcare" ${client.industry === 'Healthcare' ? 'selected' : ''}>Healthcare</option>
                                    <option value="Real Estate" ${client.industry === 'Real Estate' ? 'selected' : ''}>Real Estate</option>
                                    <option value="Retail" ${client.industry === 'Retail' ? 'selected' : ''}>Retail</option>
                                    <option value="Technology" ${client.industry === 'Technology' ? 'selected' : ''}>Technology</option>
                                    <option value="Other" ${client.industry === 'Other' ? 'selected' : ''}>Other</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label style="color: black;">Email *</label>
                                <input type="email" id="editClientEmail" value="${client.email}" required style="color: black;">
                            </div>
                            <div class="form-group">
                                <label style="color: black;">Phone</label>
                                <input type="tel" id="editClientPhone" value="${client.phone}" style="color: black;">
                            </div>
                            <div class="form-group">
                                <label style="color: black;">Address</label>
                                <textarea id="editClientAddress" rows="3" style="color: black;">${client.address}</textarea>
                            </div>
                            <div class="form-group">
                                <label style="color: black;">Status</label>
                                <select id="editClientStatus" style="color: black;">
                                    <option value="Active" ${client.status === 'Active' ? 'selected' : ''}>Active</option>
                                    <option value="Inactive" ${client.status === 'Inactive' ? 'selected' : ''}>Inactive</option>
                                    <option value="Prospect" ${client.status === 'Prospect' ? 'selected' : ''}>Prospect</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label style="color: black;">Services</label>
                                <div class="checkbox-group">
                                    <label style="color: black;"><input type="checkbox" value="Web Design" ${client.services.includes('Web Design') ? 'checked' : ''}> Web Design</label>
                                    <label style="color: black;"><input type="checkbox" value="SEO Services" ${client.services.includes('SEO Services') ? 'checked' : ''}> SEO Services</label>
                                    <label style="color: black;"><input type="checkbox" value="Social Media Management" ${client.services.includes('Social Media Management') ? 'checked' : ''}> Social Media Management</label>
                                    <label style="color: black;"><input type="checkbox" value="Content Creation" ${client.services.includes('Content Creation') ? 'checked' : ''}> Content Creation</label>
                                    <label style="color: black;"><input type="checkbox" value="Paid Advertising" ${client.services.includes('Paid Advertising') ? 'checked' : ''}> Paid Advertising</label>
                                    <label style="color: black;"><input type="checkbox" value="Email Marketing" ${client.services.includes('Email Marketing') ? 'checked' : ''}> Email Marketing</label>
                                </div>
                            </div>
                            <div class="form-group">
                                <label style="color: black;">Notes</label>
                                <textarea id="editClientNotes" rows="3" style="color: black;">${client.notes}</textarea>
                            </div>
                        </form>
                    </div>
                    <div class="modal-footer">
                        <button class="btn" onclick="saveEditedClient('${clientId}')">Save Changes</button>
                        <button class="btn btn-secondary" onclick="closeModal()">Cancel</button>
                    </div>
                </div>
            `;
            document.body.appendChild(modal);
        }

        function saveEditedClient(clientId) {
            const clientData = {
                name: document.getElementById('editClientName').value,
                industry: document.getElementById('editClientIndustry').value,
                email: document.getElementById('editClientEmail').value,
                phone: document.getElementById('editClientPhone').value,
                address: document.getElementById('editClientAddress').value,
                status: document.getElementById('editClientStatus').value,
                services: Array.from(document.querySelectorAll('#editClientForm input[type="checkbox"]:checked')).map(cb => cb.value),
                notes: document.getElementById('editClientNotes').value,
                lastContact: new Date().toISOString().split('T')[0]
            };
            
            if (!clientData.name || !clientData.industry || !clientData.email) {
                alert('Please fill in all required fields.');
                return;
            }
            
            window.tnrCRM.updateClient(clientId, clientData);
            closeModal();
            loadClients();
            updateClientStats();
            alert('Client updated successfully!');
        }

        function deleteClient(clientId) {
            if (confirm('Are you sure you want to delete this client?')) {
                window.tnrCRM.deleteClient(clientId);
                loadClients();
                updateClientStats();
                alert('Client deleted successfully!');
            }
        }

        function convertLeadToClient(leadId) {
            const client = window.tnrCRM.convertLeadToClient(leadId);
            if (client) {
                loadLeads();
                loadClients();
                updateClientStats();
                alert('Lead converted to client successfully!');
            }
        }

        function deleteLead(leadId) {
            if (confirm('Are you sure you want to delete this lead?')) {
                window.tnrCRM.leads = window.tnrCRM.leads.filter(l => l.id !== leadId);
                window.tnrCRM.saveToStorage();
                loadLeads();
                updateClientStats();
                alert('Lead deleted successfully!');
            }
        }

        function editOrder(orderId) {
            // Similar to editClient but for orders
            alert('Order editing functionality will be implemented.');
        }

        function deleteOrder(orderId) {
            if (confirm('Are you sure you want to delete this order?')) {
                window.tnrCRM.orders = window.tnrCRM.orders.filter(o => o.id !== orderId);
                window.tnrCRM.saveToStorage();
                loadOrders();
                updateClientStats();
                alert('Order deleted successfully!');
            }
        }

        function convertSubmissionToLead(submissionId) {
            const submission = window.tnrCRM.formSubmissions.find(s => s.id === submissionId);
            if (submission) {
                window.tnrCRM.addLead({
                    name: submission.name,
                    email: submission.email,
                    phone: submission.phone,
                    industry: submission.industry || 'General',
                    message: submission.message,
                    source: submission.source
                });
                loadFormSubmissions();
                loadLeads();
                updateClientStats();
                alert('Form submission converted to lead successfully!');
            }
        }

        function deleteSubmission(submissionId) {
            if (confirm('Are you sure you want to delete this form submission?')) {
                window.tnrCRM.formSubmissions = window.tnrCRM.formSubmissions.filter(s => s.id !== submissionId);
                window.tnrCRM.saveToStorage();
                loadFormSubmissions();
                alert('Form submission deleted successfully!');
            }
        }

        function closeModal() {
            const modal = document.querySelector('.modal');
            if (modal) {
                modal.remove();
            }
        }

        function formatDate(dateString) {
            const date = new Date(dateString);
            return date.toLocaleDateString();
        }
        
        function showAddOrderModal() {
            const clients = window.tnrCRM.clients || [];
            const modal = document.createElement('div');
            modal.className = 'modal';
            modal.innerHTML = `
                <div class="modal-content" style="max-width: 700px;">
                    <div class="modal-header">
                        <h3 style="color: white;">Add New Order</h3>
                        <span class="close" onclick="closeModal()">&times;</span>
                    </div>
                    <div class="modal-body" style="color: black;">
                        <form id="addOrderForm">
                            <div class="form-group">
                                <label style="color: black; font-weight: bold;">Client Type *</label>
                                <select id="clientType" required onchange="toggleClientFields()" style="color: black;">
                                    <option value="">Select Client Type</option>
                                    <option value="existing">Existing Client</option>
                                    <option value="new">New Client</option>
                                </select>
                            </div>
                            
                            <div id="existingClientSection" style="display: none;">
                                <div class="form-group">
                                    <label style="color: black; font-weight: bold;">Select Client *</label>
                                    <select id="existingClientId" style="color: black;">
                                        <option value="">Choose a client...</option>
                                        ${clients.map(client => `<option value="${client.id}" data-name="${client.name}" data-email="${client.email || ''}" data-phone="${client.phone || ''}">${client.name} - ${client.email || 'No email'}</option>`).join('')}
                                    </select>
                                </div>
                            </div>
                            
                            <div id="newClientSection" style="display: none;">
                                <h4 style="color: var(--tnr-primary); margin-bottom: 1rem;">New Client Information</h4>
                                <div class="form-group">
                                    <label style="color: black; font-weight: bold;">Client Name *</label>
                                    <input type="text" id="newClientName" placeholder="Enter client name" style="color: black;">
                                </div>
                                <div class="form-group">
                                    <label style="color: black; font-weight: bold;">Email</label>
                                    <input type="email" id="newClientEmail" placeholder="client@example.com" style="color: black;">
                                </div>
                                <div class="form-group">
                                    <label style="color: black; font-weight: bold;">Phone</label>
                                    <input type="tel" id="newClientPhone" placeholder="(412) 555-1234" style="color: black;">
                                </div>
                                <div class="form-group">
                                    <label style="color: black; font-weight: bold;">Company</label>
                                    <input type="text" id="newClientCompany" placeholder="Company name (if applicable)" style="color: black;">
                                </div>
                            </div>
                            
                            <hr style="margin: 1.5rem 0;">
                            
                            <h4 style="color: var(--tnr-primary); margin-bottom: 1rem;">Order Details</h4>
                            
                            <div class="form-group">
                                <label style="color: black; font-weight: bold;">Service/Product *</label>
                                <select id="orderService" required style="color: black;">
                                    <option value="">Select Service</option>
                                    <option value="Web Design">Web Design</option>
                                    <option value="SEO Services">SEO Services</option>
                                    <option value="Social Media Management">Social Media Management</option>
                                    <option value="Content Creation">Content Creation</option>
                                    <option value="Paid Advertising">Paid Advertising</option>
                                    <option value="Email Marketing">Email Marketing</option>
                                    <option value="Insurance - Auto">Insurance - Auto</option>
                                    <option value="Insurance - Home">Insurance - Home</option>
                                    <option value="Insurance - Business">Insurance - Business</option>
                                    <option value="Insurance - Life">Insurance - Life</option>
                                    <option value="Other">Other</option>
                                </select>
                            </div>
                            
                            <div class="form-group" id="customServiceGroup" style="display: none;">
                                <label style="color: black; font-weight: bold;">Custom Service Name</label>
                                <input type="text" id="customService" placeholder="Enter service name" style="color: black;">
                            </div>
                            
                            <div class="form-group">
                                <label style="color: black; font-weight: bold;">Order Amount *</label>
                                <div style="display: flex; align-items: center;">
                                    <span style="margin-right: 0.5rem; font-size: 1.2rem;">$</span>
                                    <input type="number" id="orderAmount" step="0.01" min="0" placeholder="0.00" required style="flex: 1; color: black;">
                                </div>
                            </div>
                            
                            <div class="form-group">
                                <label style="color: black; font-weight: bold;">Order Status *</label>
                                <select id="orderStatus" required style="color: black;">
                                    <option value="Pending">Pending</option>
                                    <option value="Confirmed">Confirmed</option>
                                    <option value="In Progress">In Progress</option>
                                    <option value="Completed">Completed</option>
                                    <option value="Cancelled">Cancelled</option>
                                </select>
                            </div>
                            
                            <div class="form-group">
                                <label style="color: black; font-weight: bold;">Order Description</label>
                                <textarea id="orderDescription" rows="3" placeholder="Describe the order details, requirements, or special notes..." style="color: black;"></textarea>
                            </div>
                            
                            <div class="form-group">
                                <label style="color: black; font-weight: bold;">Project Timeline</label>
                                <select id="orderTimeline" style="color: black;">
                                    <option value="">Select Timeline</option>
                                    <option value="ASAP">ASAP</option>
                                    <option value="1 Week">1 Week</option>
                                    <option value="2 Weeks">2 Weeks</option>
                                    <option value="1 Month">1 Month</option>
                                    <option value="2-3 Months">2-3 Months</option>
                                    <option value="3-6 Months">3-6 Months</option>
                                    <option value="Ongoing">Ongoing</option>
                                </select>
                            </div>
                            
                            <div class="form-group">
                                <label style="color: black; font-weight: bold;">Payment Method</label>
                                <select id="paymentMethod" style="color: black;">
                                    <option value="">Select Payment Method</option>
                                    <option value="Credit Card">Credit Card</option>
                                    <option value="Debit Card">Debit Card</option>
                                    <option value="Bank Transfer">Bank Transfer</option>
                                    <option value="Check">Check</option>
                                    <option value="Cash">Cash</option>
                                    <option value="Payment Plan">Payment Plan</option>
                                    <option value="Pending">Pending</option>
                                </select>
                            </div>
                            
                            <div class="form-group">
                                <label style="color: black; font-weight: bold;">Special Requests / Notes</label>
                                <textarea id="specialRequests" rows="3" placeholder="Any special requests, notes, or additional information..." style="color: black;"></textarea>
                            </div>
                        </form>
                    </div>
                    <div class="modal-footer">
                        <button class="btn" onclick="saveNewOrder()">Save Order</button>
                        <button class="btn btn-secondary" onclick="closeModal()">Cancel</button>
                    </div>
                </div>
            `;
            document.body.appendChild(modal);
            
            // Add change listener for service dropdown
            document.getElementById('orderService').addEventListener('change', function() {
                const customGroup = document.getElementById('customServiceGroup');
                if (this.value === 'Other') {
                    customGroup.style.display = 'block';
                    document.getElementById('customService').required = true;
                } else {
                    customGroup.style.display = 'none';
                    document.getElementById('customService').required = false;
                }
            });
        }
        
        function toggleClientFields() {
            const clientType = document.getElementById('clientType').value;
            const existingSection = document.getElementById('existingClientSection');
            const newSection = document.getElementById('newClientSection');
            const existingSelect = document.getElementById('existingClientId');
            
            if (clientType === 'existing') {
                existingSection.style.display = 'block';
                newSection.style.display = 'none';
                existingSelect.required = true;
                document.getElementById('newClientName').required = false;
            } else if (clientType === 'new') {
                existingSection.style.display = 'none';
                newSection.style.display = 'block';
                existingSelect.required = false;
                document.getElementById('newClientName').required = true;
            } else {
                existingSection.style.display = 'none';
                newSection.style.display = 'none';
                existingSelect.required = false;
                document.getElementById('newClientName').required = false;
            }
        }
        
        function saveNewOrder() {
            const clientType = document.getElementById('clientType').value;
            
            if (!clientType) {
                alert('Please select a client type.');
                return;
            }
            
            let clientName = '';
            let clientId = null;
            let clientEmail = '';
            let clientPhone = '';
            
            if (clientType === 'existing') {
                const selectedOption = document.getElementById('existingClientId').options[document.getElementById('existingClientId').selectedIndex];
                if (!selectedOption.value) {
                    alert('Please select a client.');
                    return;
                }
                clientId = selectedOption.value;
                clientName = selectedOption.getAttribute('data-name');
                clientEmail = selectedOption.getAttribute('data-email') || '';
                clientPhone = selectedOption.getAttribute('data-phone') || '';
            } else {
                clientName = document.getElementById('newClientName').value.trim();
                if (!clientName) {
                    alert('Please enter the client name.');
                    return;
                }
                clientEmail = document.getElementById('newClientEmail').value.trim();
                clientPhone = document.getElementById('newClientPhone').value.trim();
                const clientCompany = document.getElementById('newClientCompany').value.trim();
                
                // Create new client first
                const newClient = window.tnrCRM.addClient({
                    name: clientName,
                    email: clientEmail,
                    phone: clientPhone,
                    company: clientCompany,
                    industry: 'Not specified',
                    services: [],
                    status: 'Active',
                    source: 'Manual Entry'
                });
                clientId = newClient.id;
            }
            
            const service = document.getElementById('orderService').value;
            const customService = document.getElementById('customService').value;
            const finalService = (service === 'Other' && customService) ? customService : service;
            
            if (!finalService) {
                alert('Please select or enter a service.');
                return;
            }
            
            const amount = parseFloat(document.getElementById('orderAmount').value);
            if (!amount || amount <= 0) {
                alert('Please enter a valid order amount.');
                return;
            }
            
            const orderData = {
                clientName: clientName,
                clientId: clientId,
                service: finalService,
                amount: amount,
                status: document.getElementById('orderStatus').value,
                description: document.getElementById('orderDescription').value.trim(),
                projectTimeline: document.getElementById('orderTimeline').value || null,
                paymentMethod: document.getElementById('paymentMethod').value || null,
                specialRequests: document.getElementById('specialRequests').value.trim() || null,
                customerInfo: {
                    name: clientName,
                    email: clientEmail,
                    phone: clientPhone
                },
                industry: 'General',
                orderDate: new Date().toISOString().split('T')[0]
            };
            
            window.tnrCRM.addOrder(orderData);
            closeModal();
            loadOrders();
            updateClientStats();
            alert(`Order added successfully! Order #${orderData.id || 'TNR-' + Date.now()}`);
        }

        function convertFormSubmissions() {
            if (!window.tnrCRM) {
                alert('CRM not initialized');
                return;
            }
            
            const storedSubmissions = localStorage.getItem("tnr_form_submissions");
            if (storedSubmissions) {
                const submissions = JSON.parse(storedSubmissions);
                const beforeCount = window.tnrCRM.leads.length;
                
                // Converting form submissions to leads
                
                window.tnrCRM.autoConvertSubmissionsToLeads(submissions);
                
                const afterCount = window.tnrCRM.leads.length;
                const converted = afterCount - beforeCount;
                
                // Conversion completed
                
                if (converted > 0) {
                    alert(`Converted ${converted} form submissions to leads!`);
                    loadLeads(); // Refresh the display
                    updateClientStats(); // Update statistics
                } else {
                    alert('No new form submissions to convert');
                }
            } else {
                alert('No form submissions found in localStorage');
            }
        }
    </script>
</body>
</html>